<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cohere AI Chatbot</title>
    <link
            rel="stylesheet"
            href="{{ url_for('static', filename='css/style.css') }}"
    />
</head>
<body>
<div class="app-container">
    <header class="chat-header">
        <h1>Cohere AI Chatbot</h1>
        <form action="{{ url_for('reset') }}" method="GET">
            <button type="submit" class="reset-button">Reset</button>
        </form>
    </header>

    <div class="prompt-buttons">
        {% for prompt in prompts %}
        <button
                class="prompt-button"
                data-prompt="{{ loop.index0 }}"
                onclick="submitPrompt('{{ loop.index0 }}')"
        >
            {{ prompt }}
        </button>
        {% endfor %}
    </div>

    <main class="chat-window" id="chat-messages">
        {% for entry in history %}
        <div class="chat-message {{ entry.role|lower }}">
            <div class="message-content">{{ entry.message }}</div>
        </div>
        {% endfor %}
    </main>

    <footer class="chat-input-container">
        <form id="chat-form" class="chat-form" method="POST">
            <input
                    type="text"
                    id="user-input"
                    name="message"
                    placeholder="Type your message here..."
                    autocomplete="off"
                    required
            />
            <button type="submit" id="send-button">Send</button>
        </form>
    </footer>
</div>

<script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>

<script>
    window.addEventListener("DOMContentLoaded", function () {
        const chatMessages = document.getElementById("chat-messages");

        setTimeout(() => {
            if (chatMessages) {
                console.log("Scroll height:", chatMessages.scrollHeight);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }
        }, 50);
    });
</script>
</html>
